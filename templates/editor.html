<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</title>
    {% include 'link.html' %}
    <style>

    </style>
</head>
<body>
    <header>
        {% include 'nav.html' %}
    </header>

    <div class="container" style="margin-top: 75px;">
        <div class="editor-container">
            <h1 class="editor-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h1>
            
            <form action="{{ url_for('update_profile') }}" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                
                <div class="media-container">
                    <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å –∞–≤–∞—Ç–∞—Ä–æ–º -->
                    <div class="media-column">
                        <div class="form-group">
                            <h2>–ê–≤–∞—Ç–∞—Ä –ø—Ä–æ—Ñ–∏–ª—è</h2>
                            <div class="file-upload-wrapper">
                                <input type="file" id="avatar" name="avatar" accept="image/*" class="file-upload-input">
                                <label for="avatar" class="file-upload-label">
                                    <!-- <div class="upload-icon">üì∑</div> -->
                                    <span class="upload-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞</span>
                                    <div class="image-preview" id="avatarPreview" 
                                         style="{% if user.avatar %}display: block; background-image: url('{{ user.avatar }}');{% endif %}">
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å —Ñ–æ–Ω–æ–º -->
                    <div class="media-column">
                        <div class="form-group">
                            <h2>–§–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è</h2>
                            <div class="file-upload-wrapper">
                                <input type="file" id="background" name="background" accept="image/*" class="file-upload-input">
                                <label for="background" class="file-upload-label">
                                    <!-- <div class="upload-icon">üñºÔ∏è</div> -->
                                    <span class="upload-text">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ–Ω–∞</span>
                                    <div class="image-preview" id="backgroundPreview"
                                         style="{% if user.background %}display: block; background-image: url('{{ user.background }}');{% endif %}">
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="form-group">
                    <h2>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h2>
                    <textarea id="description" name="description" class="description-input" 
                              placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ...">{{ user.description }}</textarea>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
                <div class="save-button-container">
                    <button type="submit" class="save-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
        document.getElementById('avatar').addEventListener('change', function(e) {
            const preview = document.getElementById('avatarPreview');
            const file = e.target.files[0];
            
            if (file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.style.backgroundImage = `url('${e.target.result}')`;
                    preview.style.display = 'block';
                }
                
                reader.readAsDataURL(file);
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–∞
        document.getElementById('background').addEventListener('change', function(e) {
            const preview = document.getElementById('backgroundPreview');
            const file = e.target.files[0];
            
            if (file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.style.backgroundImage = `url('${e.target.result}')`;
                    preview.style.display = 'block';
                }
                
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>